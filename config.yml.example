# ==============================================================================
# dbs-vector Configuration File Example
# ==============================================================================
# To use this configuration, copy it to `config.yaml` or pass it via the CLI:
#   uv run dbs-vector --config-file custom_config.yaml <command>
# ==============================================================================

system:
  # The local directory path where LanceDB will store the vector data and indices.
  db_path: "./lancedb_dbs_vector"
  
  # The number of chunks to embed and ingest in a single batch.
  batch_size: 64
  
  # The number of IVF partitions to probe during a vector search.
  nprobes: 20

# ==============================================================================
# Engine Definitions
# ==============================================================================
engines:
  
  # --------------------------------------------------------------------------
  # Markdown & Prose Document Engine (Gemma Search Result Workflow)
  # --------------------------------------------------------------------------
  md:
    description: "Markdown & Prose Document Engine (Gemma Search)"
    model_name: "mlx-community/embeddinggemma-300m-bf16"
    vector_dimension: 768
    max_token_length: 2048
    table_name: "knowledge_vault"
    mapper_type: "document"
    chunker_type: "document"
    chunk_max_chars: 1000

    # Task Prefixes for Gemma Search workflow
    passage_prefix: "title: none | text: "
    query_prefix: "task: search result | query: "
    workflow: "md_search"

  # --------------------------------------------------------------------------
  # SQL Slow Query Log Engine (Gemma Clustering Workflow)
  # --------------------------------------------------------------------------
  sql:
    description: "SQL Slow Query Log Engine (Gemma Clustering)"
    model_name: "mlx-community/embeddinggemma-300m-bf16"
    vector_dimension: 768
    max_token_length: 2048
    table_name: "query_vault"
    mapper_type: "sql"
    chunker_type: "sql"
    chunk_max_chars: 0

    # Task Prefixes for Gemma Clustering workflow
    passage_prefix: "task: clustering | query: "
    query_prefix: "task: clustering | query: "
    workflow: "sql_clustering"
